const multer = require('multer');
const upload = multer({
    // storage 안에는 어디에 (destination) 어떤 이름으로 (filename) 저장할지를 넣는다.
    storage : multer.diskStorage({
        // req:요청, file:업로드한 파일에 대한 정보,done:콜백함수.
        // done (에러가 있다면 에러, 실제 경로/파일 이름)
        // req와 file의 데이터를 가공해 done 함수로 넘김
        destination: function (req, file, cb) {
            cb(null, "../db/uploads")
        },
        filename: function (req, file, cb) {
            cb(null, file.fieldname + '-' + Date.now())
        }
    }),
    limits : {fileSize : 5 * 1024 * 1024},
})

module.exports=upload